<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Login - Waka Multimedia</title>
<style>
  body, html {
    height: 100%;
    margin: 0;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    background: url('pexels-bri-schneiter-28802-346529.jpg') no-repeat center center fixed;
    background-size: cover;
  }
  #loginBox {
    width: 5in;
    background: rgba(255, 255, 255, 0.2);
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
    backdrop-filter: blur(10px);
    text-align: center;
  }
  #loginBox input {
    width: 90%;
    padding: 10px;
    margin: 10px 0;
    border: none;
    border-radius: 5px;
  }
  #loginBox button {
    width: 95%;
    padding: 10px;
    margin-top: 10px;
    border: none;
    border-radius: 5px;
    background-color: rgba(255, 255, 255, 0.3);
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s;
  }
  #loginBox button:hover {
    background-color: rgba(255, 255, 255, 0.5);
  }
  h2 {
    margin-bottom: 20px;
    color: white;
    text-shadow: 1px 1px 2px black;
  }
  #forgotPassword {
    background: none;
    border: none;
    color: black;
    cursor: pointer;
    text-decoration: underline;
    font-size: 14px;
    padding: 0;
    margin-top: 10px;
  }
</style>
</head>
<body>

<div id="loginBox">
  <h2>Login</h2>
  <form id="loginForm">
    <input name="username" placeholder="User Name" required>
    <input name="password" type="password" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>

  <!-- Forgot Password Button -->
  <button id="forgotPassword">Forgot Password?</button>
</div>

<script>
  // Forgot Password redirect
  document.getElementById('forgotPassword').addEventListener('click', () => {
    window.location.href = 'create-new-password.html';
  });

  // Login handler
  document.getElementById('loginForm').addEventListener('submit', async e => {
    e.preventDefault();
    const res = await fetch('/api/login', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({
        username: e.target.username.value,
        password: e.target.password.value
      })
    });

    const data = await res.json();

    if(data.user){ 
      localStorage.setItem('user', JSON.stringify(data.user));
      alert('Login successful!');
      window.location.href = 'home.html';
    } else {
      alert('Login failed. Please check your credentials.');
    }
  });
</script>

</body>
</html>